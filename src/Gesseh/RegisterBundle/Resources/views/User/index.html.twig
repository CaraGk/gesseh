{% extends 'GessehCoreBundle::layout.html.twig' %}

{% block titlecontent %}Mes adhésions{% endblock %}

{% block actionscontent %}
    <li><a href="{{ path('GRegister_UJoin')}}">Adhérer</a></li>
{% endblock %}

{% block content %}
    <ol>
        {% for membership in memberships %}
            <li>Adhésion jusqu'au {{ membership.expiredOn|date('d/m/Y') }} payée ({{ membership.payment }} €) par {{ membership.readableMethod|lower }}
                {% if membership.payedOn is not null %}
                    le {{ membership.payedOn|date('d/m/Y') }}.
                {% else %}
                    ; la transaction n'a pas été validée.
                {% endif %}
                <ul class="actions">
                    <li><a href="{{ path('GRegister_UInfos', {'memberid': membership.id, 'userid': userid}) }}" title="Afficher les réponses aux questions complémentaires">Infos</a></li>
                    {% if is_granted('ROLE_ADMIN') and membership.payedOn is null %}
                        <li><a href="{{ path('GRegister_AValidate', {'id': membership.id, 'userid': userid}) }}" title="Valider la réception du paiement pour cette adhésion">Valider</a></li>
                        <li><a href="{{ path('GRegister_ADelete', {'id': membership.id, 'userid': userid}) }}" title="Supprimer cette adhésion">Supprimer</a></li>
                {% endif %}
                </ul>
            </li>
        {% else %}
            <li>Aucune adhésion enregistrée.</li>
        {% endfor %}
    </ol>
{% endblock %}
