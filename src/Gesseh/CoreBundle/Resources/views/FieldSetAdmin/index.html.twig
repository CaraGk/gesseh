{% extends 'GessehCoreBundle::layout.html.twig' %}

{% block titlecontent %}Hôpitaux et services{% endblock %}

{% block content %}
    {% include 'GessehCoreBundle:FieldSetAdmin:subMenu.html.twig' %}
    {% if hospital_form is not empty %}
        <div>{{ form_errors(hospital_form) }}</div>
        {{ form_start(hospital_form) }}>
    {% endif %}
    {% for hospital in hospitals %}
        {% include hospital_id == hospital.id ? 'GessehCoreBundle:FieldSetAdmin:editHospital.html.twig' : 'GessehCoreBundle:FieldSetAdmin:indexHospital.html.twig' %}
    {% endfor %}
    {% if hospital_form is not empty and hospital_id is empty %}
        {% include 'GessehCoreBundle:FieldSetAdmin:editHospital.html.twig' %}
    {% endif %}
    <ul>
        <li><a href="{{ path('GCore_FSANewHospital') }}#hospital_new" title="Ajouter un nouvel hôpital">Ajouter</a></li>
    </ul>
    {% if hospital_form is not empty %}{{ form_end(hospital_form) }}{% endif %}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('bundles/gessehcore/js/addSub.js') }}" type="text/javascript"></script>
    <script src="{{ asset('bundles/gessehcore/js/confirm.js') }}" type="text/javascript"></script>
    <script>
        $('document').ready(function(){
            $('.actions').hide();

            $('li.hospital').hover(function(){
                $(this).children('.actions').show();
            }, function(){
                $(this).children('.actions').hide();
            });
            $('li.department').hover(function(){
                $(this).children('.actions').show();
            }, function(){
                $(this).children('.actions').hide();
            });
        });
    </script>
{% endblock %}
