{% extends 'GessehCoreBundle::layout.html.twig' %}

{% block titlecontent %}Catégories, hôpitaux et services{% endblock %}

{% block content %}
  <h3>Catégories :</h3>
  <div class="table">
    <div class="table_head">
      <p>
        <span class="name">Name</span>
        <span class="actions">Actions</span>
      </p>
    </div>
    <div class="table_body">
      {% for sector in sectors %}
        <p>
          <span class="name">{{ sector.name }}</span>
          <span class="actions"><a href="{{ path('GCore_FSAEditSector', { 'id': sector.id }) }}">modifier</a></span>
        </p>
      {% endfor %}
    </div>
    <div class="table_foot">
      <p>
        <span class="actions"><a href="{{ path('GCore_FSAEditSector') }}">Ajouter</a></span>
      </p>
    </div>
  </div>

  <h3>Hôpitaux et services :</h3>

  <div class="table">
    <div class="table_head">
      <p>
        <span>Name</span>
        <span>Adresse</span>
        <span>Site web</span>
        <span>Téléphone</span>
        <span>Actions</span>
      </p>
    </div>
    <div class="table_body">
      {% for hospital in hospitals %}
        {% include hospital_id == hospital.id ? 'GessehCoreBundle:FieldSetAdmin:editHospital.html.twig' : 'GessehCoreBundle:FieldSetAdmin:indexHospital.html.twig' %}
      {% endfor %}
      {% if hospital_form is not empty and hospital_id is empty %}
        {% include 'GessehCoreBundle:FieldSetAdmin:editHospital.html.twig' %}
      {% endif %}
    </div>
    <div class="table_foot">
      <p>
        <span><a href="{{ path('GCore_FSANewHospital') }}">Ajouter</a></span>
      </p>
    </div>
  </div>
{% endblock %}

  {% block javascripts %}
    {{ parent() }}
    <script src="http://code.jquery.com/jquery-1.6.2.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function() {
        var $container = $('#gesseh_corebundle_hospitaltype_departments');

        function add_dpt() {
          index = $container.children().length;
          $container.append(
            $($container.attr('data-prototype').replace(/\$\$name\$\$/g, index))
          );
        }

        $('#add_dpt').click(function() {
          add_dpt();
        });
      });
    </script>
  {% endblock %}

{% if hospital_form is not empty %}
  {% form_theme hospital_form 'GessehCoreBundle:Form:fields.html.twig' %}
{% endif %}
