{% extends 'GessehCoreBundle::layout.html.twig' %}

{% block title %}{{ parent() }} - Simulation{% endblock %}

{% block titlecontent %}Résultats de la simulation{% endblock %}

{% block actionscontent %}
    {% if simulations is not empty %}
        <li class="field"><a href="{{ path('GSimul_SSim') }}" title="Lancer l'algorithme de simulation"><button type="button">Actualiser les simulations</button></a></li>
        <li class="field"><a href="{{ path('GSimul_SASave') }}" title="Valider les simulation et les enregistrer dans les stages."><img src="{{ asset('bundles/gessehcore/images/Valid.png') }}" alt="Valider les simulations" /></a></li>
        <li class="field"><a href="{{ path('GSimul_SAPurge') }}" title="Supprimer la table de simulation" class="confirm" confirm="Attention ! Cette opération va supprimer toutes les données concernant la simulation en cours. Souhaitez-vous continuer ?"><img src="{{ asset('bundles/gessehcore/images/Error.png') }}" alt="Supprimer la table de simulation" /></a></li>
    {% else %}
        <li>La table de simulation n'est pas générée : <a href="{{ path('GSimul_SADefine') }}" title="Cliquez pour générer la table de simulation"><button type="button">Générer la table</button></a></li>
    {% endif %}
{% endblock %}

{% block content %}
    {% if simulations is not empty %}
        <div id="simul_progress">
            Progression de la simulation : <span>{{ simul_total - simul_missing }} / {{ simul_total }} participants</span>
            <progress class="progressbar" value="{{ (simul_total - simul_missing) / simul_total * 100 }}" max="100"></progress>
        </div>
        {{ include('GessehSimulationBundle:Simulation:simulations.html.twig', {'simulations': simulations}) }}
    {% endif %}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        $(document).ready(function() {
            $('.valid').parent('li').addClass('valid');
            $('.invalid').parent('li').addClass('invalid');
            $('.grey').parent('li').addClass('grey');
            $('.warning').parent('li').addClass('warning');
        });
    </script>
{% endblock %}
